/**
 * Emoji shortcode map for :emoji: typeahead support.
 * Maps shortcode names to emoji characters.
 */
export const EMOJI_MAP: Record<string, string> = {
  // Faces - smiling
  smile: 'ğŸ˜Š',
  grin: 'ğŸ˜€',
  grinning: 'ğŸ˜',
  joy: 'ğŸ˜‚',
  rofl: 'ğŸ¤£',
  blush: 'ğŸ˜Š',
  innocent: 'ğŸ˜‡',
  wink: 'ğŸ˜‰',
  relaxed: 'â˜ºï¸',
  yum: 'ğŸ˜‹',
  heart_eyes: 'ğŸ˜',
  kissing_heart: 'ğŸ˜˜',
  kissing: 'ğŸ˜—',
  stuck_out_tongue: 'ğŸ˜›',
  stuck_out_tongue_winking_eye: 'ğŸ˜œ',
  stuck_out_tongue_closed_eyes: 'ğŸ˜',
  sunglasses: 'ğŸ˜',
  smirk: 'ğŸ˜',

  // Faces - neutral/skeptical
  thinking: 'ğŸ¤”',
  raised_eyebrow: 'ğŸ¤¨',
  neutral_face: 'ğŸ˜',
  expressionless: 'ğŸ˜‘',
  no_mouth: 'ğŸ˜¶',
  rolling_eyes: 'ğŸ™„',
  hushed: 'ğŸ˜¯',
  open_mouth: 'ğŸ˜®',
  astonished: 'ğŸ˜²',

  // Faces - negative
  worried: 'ğŸ˜Ÿ',
  frowning: 'ğŸ˜¦',
  anguished: 'ğŸ˜§',
  fearful: 'ğŸ˜¨',
  cry: 'ğŸ˜¢',
  sob: 'ğŸ˜­',
  scream: 'ğŸ˜±',
  confounded: 'ğŸ˜–',
  persevere: 'ğŸ˜£',
  disappointed: 'ğŸ˜',
  sweat: 'ğŸ˜“',
  tired_face: 'ğŸ˜«',
  sleepy: 'ğŸ˜ª',
  sleeping: 'ğŸ˜´',
  angry: 'ğŸ˜ ',
  rage: 'ğŸ˜¡',
  triumph: 'ğŸ˜¤',
  pensive: 'ğŸ˜”',
  confused: 'ğŸ˜•',

  // Faces - sick/costume
  mask: 'ğŸ˜·',
  thermometer_face: 'ğŸ¤’',
  bandage_face: 'ğŸ¤•',
  nauseated_face: 'ğŸ¤¢',
  sneezing_face: 'ğŸ¤§',
  hot_face: 'ğŸ¥µ',
  cold_face: 'ğŸ¥¶',
  woozy_face: 'ğŸ¥´',
  dizzy_face: 'ğŸ˜µ',
  exploding_head: 'ğŸ¤¯',

  // Hands/gestures
  thumbsup: 'ğŸ‘',
  '+1': 'ğŸ‘',
  thumbsdown: 'ğŸ‘',
  '-1': 'ğŸ‘',
  clap: 'ğŸ‘',
  raised_hands: 'ğŸ™Œ',
  open_hands: 'ğŸ‘',
  palms_up: 'ğŸ¤²',
  handshake: 'ğŸ¤',
  pray: 'ğŸ™',
  wave: 'ğŸ‘‹',
  call_me: 'ğŸ¤™',
  muscle: 'ğŸ’ª',
  fist: 'âœŠ',
  punch: 'ğŸ‘Š',
  ok_hand: 'ğŸ‘Œ',
  pinching_hand: 'ğŸ¤',
  v: 'âœŒï¸',
  crossed_fingers: 'ğŸ¤',
  love_you: 'ğŸ¤Ÿ',
  metal: 'ğŸ¤˜',
  point_left: 'ğŸ‘ˆ',
  point_right: 'ğŸ‘‰',
  point_up: 'â˜ï¸',
  point_down: 'ğŸ‘‡',
  middle_finger: 'ğŸ–•',
  writing_hand: 'âœï¸',

  // Hearts
  heart: 'â¤ï¸',
  red_heart: 'â¤ï¸',
  orange_heart: 'ğŸ§¡',
  yellow_heart: 'ğŸ’›',
  green_heart: 'ğŸ’š',
  blue_heart: 'ğŸ’™',
  purple_heart: 'ğŸ’œ',
  black_heart: 'ğŸ–¤',
  white_heart: 'ğŸ¤',
  brown_heart: 'ğŸ¤',
  broken_heart: 'ğŸ’”',
  sparkling_heart: 'ğŸ’–',
  heartpulse: 'ğŸ’—',
  heartbeat: 'ğŸ’“',
  two_hearts: 'ğŸ’•',
  revolving_hearts: 'ğŸ’',

  // Symbols
  fire: 'ğŸ”¥',
  star: 'â­',
  sparkles: 'âœ¨',
  boom: 'ğŸ’¥',
  zap: 'âš¡',
  rainbow: 'ğŸŒˆ',
  sunny: 'â˜€ï¸',
  cloud: 'â˜ï¸',
  snowflake: 'â„ï¸',
  droplet: 'ğŸ’§',
  check: 'âœ…',
  white_check_mark: 'âœ…',
  x: 'âŒ',
  warning: 'âš ï¸',
  no_entry: 'ğŸš«',
  question: 'â“',
  exclamation: 'â—',
  100: 'ğŸ’¯',
  dollar: 'ğŸ’µ',
  moneybag: 'ğŸ’°',
  chart: 'ğŸ“ˆ',
  chart_with_upwards_trend: 'ğŸ“ˆ',
  chart_with_downwards_trend: 'ğŸ“‰',

  // Objects
  rocket: 'ğŸš€',
  airplane: 'âœˆï¸',
  car: 'ğŸš—',
  bike: 'ğŸš²',
  ship: 'ğŸš¢',
  trophy: 'ğŸ†',
  medal: 'ğŸ…',
  gift: 'ğŸ',
  balloon: 'ğŸˆ',
  tada: 'ğŸ‰',
  party_popper: 'ğŸ‰',
  confetti_ball: 'ğŸŠ',
  bell: 'ğŸ””',
  key: 'ğŸ”‘',
  lock: 'ğŸ”’',
  unlock: 'ğŸ”“',
  bulb: 'ğŸ’¡',
  mag: 'ğŸ”',
  wrench: 'ğŸ”§',
  hammer: 'ğŸ”¨',
  gear: 'âš™ï¸',
  link: 'ğŸ”—',
  paperclip: 'ğŸ“',
  pushpin: 'ğŸ“Œ',
  scissors: 'âœ‚ï¸',
  pencil: 'âœï¸',
  memo: 'ğŸ“',
  book: 'ğŸ“–',
  bookmark: 'ğŸ”–',
  calendar: 'ğŸ“…',
  clock: 'ğŸ•',
  hourglass: 'â³',
  stopwatch: 'â±ï¸',
  alarm_clock: 'â°',
  phone: 'ğŸ“±',
  computer: 'ğŸ’»',
  keyboard: 'âŒ¨ï¸',
  email: 'ğŸ“§',
  envelope: 'âœ‰ï¸',
  mailbox: 'ğŸ“¬',
  package: 'ğŸ“¦',
  camera: 'ğŸ“·',
  video_camera: 'ğŸ“¹',
  tv: 'ğŸ“º',
  microphone: 'ğŸ¤',
  headphones: 'ğŸ§',
  guitar: 'ğŸ¸',
  musical_note: 'ğŸµ',
  notes: 'ğŸ¶',

  // People
  eyes: 'ğŸ‘€',
  eye: 'ğŸ‘ï¸',
  ear: 'ğŸ‘‚',
  nose: 'ğŸ‘ƒ',
  tongue: 'ğŸ‘…',
  lips: 'ğŸ‘„',
  baby: 'ğŸ‘¶',
  boy: 'ğŸ‘¦',
  girl: 'ğŸ‘§',
  man: 'ğŸ‘¨',
  woman: 'ğŸ‘©',
  angel: 'ğŸ‘¼',
  ghost: 'ğŸ‘»',
  alien: 'ğŸ‘½',
  robot: 'ğŸ¤–',
  skull: 'ğŸ’€',
  poop: 'ğŸ’©',

  // Animals
  dog: 'ğŸ¶',
  cat: 'ğŸ±',
  mouse: 'ğŸ­',
  hamster: 'ğŸ¹',
  rabbit: 'ğŸ°',
  fox: 'ğŸ¦Š',
  bear: 'ğŸ»',
  panda: 'ğŸ¼',
  koala: 'ğŸ¨',
  tiger: 'ğŸ¯',
  lion: 'ğŸ¦',
  cow: 'ğŸ®',
  pig: 'ğŸ·',
  frog: 'ğŸ¸',
  monkey: 'ğŸµ',
  chicken: 'ğŸ”',
  penguin: 'ğŸ§',
  bird: 'ğŸ¦',
  eagle: 'ğŸ¦…',
  duck: 'ğŸ¦†',
  owl: 'ğŸ¦‰',
  bat: 'ğŸ¦‡',
  wolf: 'ğŸº',
  horse: 'ğŸ´',
  unicorn: 'ğŸ¦„',
  bee: 'ğŸ',
  bug: 'ğŸ›',
  butterfly: 'ğŸ¦‹',
  snail: 'ğŸŒ',
  octopus: 'ğŸ™',
  fish: 'ğŸŸ',
  dolphin: 'ğŸ¬',
  whale: 'ğŸ³',
  shark: 'ğŸ¦ˆ',
  crab: 'ğŸ¦€',
  turtle: 'ğŸ¢',
  snake: 'ğŸ',
  dragon: 'ğŸ‰',
  dinosaur: 'ğŸ¦•',

  // Food
  apple: 'ğŸ',
  banana: 'ğŸŒ',
  grapes: 'ğŸ‡',
  strawberry: 'ğŸ“',
  watermelon: 'ğŸ‰',
  lemon: 'ğŸ‹',
  orange: 'ğŸŠ',
  peach: 'ğŸ‘',
  cherry: 'ğŸ’',
  avocado: 'ğŸ¥‘',
  eggplant: 'ğŸ†',
  potato: 'ğŸ¥”',
  carrot: 'ğŸ¥•',
  corn: 'ğŸŒ½',
  pepper: 'ğŸŒ¶ï¸',
  broccoli: 'ğŸ¥¦',
  pizza: 'ğŸ•',
  burger: 'ğŸ”',
  fries: 'ğŸŸ',
  hotdog: 'ğŸŒ­',
  taco: 'ğŸŒ®',
  burrito: 'ğŸŒ¯',
  sushi: 'ğŸ£',
  ramen: 'ğŸœ',
  spaghetti: 'ğŸ',
  bread: 'ğŸ',
  croissant: 'ğŸ¥',
  cake: 'ğŸ‚',
  cupcake: 'ğŸ§',
  pie: 'ğŸ¥§',
  cookie: 'ğŸª',
  chocolate: 'ğŸ«',
  candy: 'ğŸ¬',
  lollipop: 'ğŸ­',
  icecream: 'ğŸ¦',
  donut: 'ğŸ©',
  coffee: 'â˜•',
  tea: 'ğŸµ',
  beer: 'ğŸº',
  beers: 'ğŸ»',
  wine: 'ğŸ·',
  cocktail: 'ğŸ¸',
  champagne: 'ğŸ¾',
};

/**
 * Common emojis for quick picker display.
 */
export const COMMON_EMOJIS = [
  'ğŸ‘', 'ğŸ‘', 'â¤ï¸', 'ğŸ˜‚', 'ğŸ˜®', 'ğŸ˜¢', 'ğŸ‰', 'ğŸ”¥',
  'ğŸ‘€', 'âœ…', 'ğŸš€', 'ğŸ’¯', 'ğŸ™', 'ğŸ‘', 'ğŸ˜Š', 'ğŸ¤”',
];

/**
 * Search emojis by query string.
 * Returns matching emojis with their shortcodes.
 */
export function searchEmojis(query: string, limit = 10): Array<{ shortcode: string; emoji: string }> {
  if (!query) {
    return COMMON_EMOJIS.slice(0, limit).map(emoji => {
      const shortcode = Object.entries(EMOJI_MAP).find(([, e]) => e === emoji)?.[0] || '';
      return { shortcode, emoji };
    });
  }

  const lowerQuery = query.toLowerCase();
  const results: Array<{ shortcode: string; emoji: string; score: number }> = [];

  for (const [shortcode, emoji] of Object.entries(EMOJI_MAP)) {
    if (shortcode.includes(lowerQuery)) {
      // Prefer exact matches and prefix matches
      const score = shortcode === lowerQuery ? 0 : shortcode.startsWith(lowerQuery) ? 1 : 2;
      results.push({ shortcode, emoji, score });
    }
  }

  return results
    .sort((a, b) => a.score - b.score || a.shortcode.localeCompare(b.shortcode))
    .slice(0, limit)
    .map(({ shortcode, emoji }) => ({ shortcode, emoji }));
}
